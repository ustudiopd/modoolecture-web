# 질문보드 페이지 정렬 문제 해결 시도 보고서

## 📋 문제 상황

### 1. 주요 문제
- **질문보드 페이지** (`app/board/[event]/page.tsx`)에서 새로고침 시:
  - 초기 렌더링 시 왼쪽 정렬로 표시됨
  - 이후 가운데 정렬로 변경되는 깜빡임 현상 발생
- **Navbar** (`components/Navbar.tsx`)의 "모두의특강" 로고 부분 정렬 어긋남
- **로딩 상태**에서도 동일한 정렬 문제 발생

### 2. 기술 스택
- Next.js 16 (App Router)
- Tailwind CSS
- TypeScript

---

## 🔧 시도한 해결 방법

### 방법 1: CSS 전역 스타일 추가
**파일**: `app/globals.css`

```css
/* Navbar 초기 정렬 보장 */
nav[class*="fixed"] [class*="max-w"] {
  margin-left: auto !important;
  margin-right: auto !important;
}

/* 질문보드 초기 정렬 보장 */
main[class*="max-w"] {
  margin-left: auto !important;
  margin-right: auto !important;
}

header [class*="max-w"] {
  margin-left: auto !important;
  margin-right: auto !important;
}

/* 로딩 상태 초기 정렬 보장 */
div[class*="flex"][class*="items-center"][class*="justify-center"] {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
}
```

**결과**: 부분적 개선, 완전한 해결 실패

---

### 방법 2: 인라인 스타일 추가
**파일**: `app/board/[event]/page.tsx`, `components/Navbar.tsx`

#### Navbar 수정
```tsx
<nav className="fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800 left-0 right-0">
  <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" style={{ marginLeft: 'auto', marginRight: 'auto' }}>
```

#### Header 섹션 수정
```tsx
<div className="max-w-4xl mx-auto px-4 py-12 relative z-10 text-center" style={{ marginLeft: 'auto', marginRight: 'auto' }}>
```

#### Main 섹션 수정
```tsx
<main className="w-full max-w-4xl mx-auto px-4 py-8 pb-20" style={{ marginLeft: 'auto', marginRight: 'auto' }}>
```

#### 로딩 상태 수정
```tsx
<div className="pt-24 pb-20 min-h-screen flex items-center justify-center w-full" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', width: '100%' }}>
```

**결과**: 여전히 초기 렌더링 시 깜빡임 발생

---

### 방법 3: 컨테이너 구조 변경
**파일**: `app/board/[event]/page.tsx`

- 최상위에 `<div className="min-h-screen">` 컨테이너 추가
- 로딩 상태에도 동일한 컨테이너 구조 적용

**결과**: 구조는 개선되었으나 정렬 문제 지속

---

### 방법 4: Body 레벨 스타일 추가
**파일**: `app/globals.css`

```css
body {
  font-family: 'Pretendard', sans-serif;
  width: 100%;
  margin: 0;
  padding: 0;
}
```

**결과**: 기본 스타일은 적용되었으나 정렬 문제 지속

---

## 🔍 현재 상태

### 적용된 코드 구조

#### 1. Navbar (`components/Navbar.tsx`)
```tsx
<nav className="fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800 left-0 right-0">
  <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" style={{ marginLeft: 'auto', marginRight: 'auto' }}>
```

#### 2. 질문보드 페이지 (`app/board/[event]/page.tsx`)
```tsx
<main className="w-full max-w-4xl mx-auto px-4 py-8 pb-20" style={{ marginLeft: 'auto', marginRight: 'auto' }}>
  {/* Controls (Sticky) - 검색창 섹션 */}
  <div className="sticky top-0 bg-slate-950/90 backdrop-blur-md py-4 z-40 space-y-4 mb-6 border-b border-slate-800">
    {/* 검색창은 가운데 정렬이 잘 작동함 */}
  </div>
  
  {/* Question Grid - 질문 카드 섹션 */}
  <div className="grid gap-4 w-full" style={{ width: '100%' }}>
    {/* 질문 카드들이 여전히 초기 렌더링 시 왼쪽 정렬됨 */}
  </div>
</main>
```

### 문제점 분석
1. **검색창 섹션**: 정상 작동 (가운데 정렬 유지)
2. **질문 카드 그리드**: 초기 렌더링 시 왼쪽 정렬 후 가운데 정렬로 변경
3. **Navbar**: 로고 부분 정렬 어긋남

---

## 💡 추가 확인 필요 사항

### 1. CSS 로딩 타이밍 문제
- Tailwind CSS가 초기 렌더링 시 제대로 로드되지 않을 수 있음
- `mx-auto` 클래스가 적용되기 전에 기본 스타일이 보일 수 있음

### 2. Next.js 하이드레이션 문제
- 서버 사이드 렌더링과 클라이언트 사이드 하이드레이션 간 스타일 불일치 가능성
- `useEffect`를 사용한 클라이언트 사이드 스타일 적용 고려 필요

### 3. Tailwind CSS 클래스 우선순위
- `!important`를 사용했음에도 불구하고 다른 스타일이 우선 적용될 수 있음
- CSS 특이성(specificity) 문제 가능성

### 4. 브라우저 렌더링 최적화
- 브라우저가 초기 렌더링 시 스타일을 지연 적용할 수 있음
- Critical CSS 인라인화 필요할 수 있음

---

## 🎯 권장 해결 방법

### 방법 A: Critical CSS 인라인화
```tsx
// app/board/[event]/page.tsx 상단에
<style dangerouslySetInnerHTML={{
  __html: `
    main { margin-left: auto !important; margin-right: auto !important; }
    nav [class*="max-w"] { margin-left: auto !important; margin-right: auto !important; }
  `
}} />
```

### 방법 B: useLayoutEffect 사용
```tsx
import { useLayoutEffect } from 'react';

useLayoutEffect(() => {
  // DOM 조작으로 즉시 정렬 적용
  const main = document.querySelector('main');
  if (main) {
    main.style.marginLeft = 'auto';
    main.style.marginRight = 'auto';
  }
}, []);
```

### 방법 C: CSS 변수 활용
```css
:root {
  --container-max-width: 1024px;
}

main {
  max-width: var(--container-max-width);
  margin-left: auto;
  margin-right: auto;
}
```

### 방법 D: Suspense Boundary 활용
```tsx
<Suspense fallback={<LoadingSpinner />}>
  <BoardContent />
</Suspense>
```

### 방법 E: 초기 스타일을 HTML에 직접 주입
- `app/layout.tsx`에서 초기 스타일을 `<head>`에 주입
- 또는 `next.config.js`에서 Critical CSS 추출

---

## 📝 추가 디버깅 정보

### 확인해야 할 파일들
1. `app/board/[event]/page.tsx` - 메인 페이지 컴포넌트
2. `components/Navbar.tsx` - 네비게이션 바
3. `app/globals.css` - 전역 스타일
4. `app/layout.tsx` - 루트 레이아웃
5. `tailwind.config.ts` - Tailwind 설정

### 브라우저 개발자 도구 확인 사항
1. Computed 스타일에서 `margin-left`, `margin-right` 값 확인
2. Network 탭에서 CSS 파일 로딩 타이밍 확인
3. Performance 탭에서 렌더링 타이밍 확인
4. Elements 탭에서 초기 HTML 구조 확인

---

## 🔄 다음 단계

1. **브라우저 개발자 도구로 정확한 원인 파악**
   - 초기 렌더링 시 적용되는 스타일 확인
   - CSS 로딩 타이밍 확인

2. **하이드레이션 문제 확인**
   - `suppressHydrationWarning` 사용 고려
   - 클라이언트 사이드 전용 렌더링 고려

3. **Critical CSS 추출**
   - Next.js의 Critical CSS 기능 활용
   - 또는 수동으로 인라인 스타일 주입

4. **대안 접근**
   - CSS-in-JS 라이브러리 사용 고려
   - 또는 CSS Modules로 전환 고려

---

## 📌 요약

**문제**: 초기 렌더링 시 왼쪽 정렬 후 가운데 정렬로 변경되는 깜빡임 현상

**시도한 방법**: CSS `!important`, 인라인 스타일, 컨테이너 구조 변경 등

**현재 상태**: 부분적 개선, 완전한 해결 실패

**추정 원인**: CSS 로딩 타이밍 또는 Next.js 하이드레이션 문제

**권장 해결책**: Critical CSS 인라인화 또는 `useLayoutEffect`를 사용한 즉시 스타일 적용

